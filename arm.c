#pragma config(Motor,  motorA,          swivelMotor,   tmotorNXT, PIDControl, encoder)
#pragma config(Motor,  motorB,          pinchMotor,    tmotorNXT, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

//--------------------------------------------------Variables

// Bluetooth Messages
const string BODY_START = "BODY_START";
const string ARM_INIT = "ARM_INIT"
const string ARM_START = "ARM_START";
const string ARM_EXIT = "ARM_EXIT";

// RobotC doesn't hoist functions, solve
// this by declaring functions above.
void toDefaultPosition();
void moveArm();
void pinchChopsticks();
void releaseChopsticks();
void messageBody();
void waitForMessage();
void init();
void pickUpSushi();
void dropSushi();
void exit();

//--------------------------------------------------Movement

// Moves arm configuration into default position.
void toDefaultPosition();
// Moves the arm into place.
void moveArm(int power);
// Moves chopsticks into pinching position.
void pinchChopsticks(int power);
// Releases chopsticks from pinching position.
void releaseChopsticks(int power);

//--------------------------------------------------Bluetooth

// COMMAND    | CODE |  TRANSLATION
// -----------|------|-----------------------
// BODY_START |  +3  |  Run body cycle
// ARM_INIT   |  +2  |  Initialize arm
// ARM_START  |  +1  |  Run arm cycle
// ARM_EXIT   |  -1  |  Exit arm program

// Sends a BODY message to the body controller.
void messageBody(const string command) {
	// RobotC bugs out if switch has one case,
  // just use if check for now.
	if (strcmp(command, BODY_START) == 0) {
		sendMessage(3);
	}
};
// Pauses the program while we wait for a
// message from the body controller.
void waitForMessage(){
	waitUntil(message);
};

//--------------------------------------------------Utils

// Initialize system variables
void init();
// Pick up the sushi.
void pickUpSushi();
// Drops the sushi.
void dropSushi();
// Exit the program
void exit(){
	powerOff();
};

//--------------------------------------------------Main
// Runs a single cycle of the arm program.
//
// 1) Wait to receive message from the body.
// 		- If exit message, exit the program
// 2) If pickup message, pickup the sushi.
// 3) Drop Sushi at desired location
// 4) Move to default position
// 5) Message body
// 6) Repeat loop
void nextArmCycle();

task main()
{



}
